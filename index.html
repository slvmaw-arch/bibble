<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bibble To-Do</title>

<style>
/* ðŸŒˆ FIX BLACK BAR BY PAINTING HTML */
html {
  background:
    radial-gradient(circle at top left, #7ff3e6, transparent 55%),
    radial-gradient(circle at bottom right, #ffc1e6, transparent 55%),
    linear-gradient(135deg, #36e0d0, #ff5db1, #9b7cff);
}

:root {
  --teal: #36e0d0;
  --pink: #ff5db1;
  --purple: #9b7cff;

  --card: #ffffff;
  --panel: #fff7fd;
  --text: #4b2473;
  --muted: #a18bd6;
}

/* ðŸŒˆ BODY (NO JUMP EVER) */
body {
  margin: 0;
  min-height: 100dvh;
  font-family: "Segoe UI", system-ui, sans-serif;
  background: transparent;
  overflow-x: hidden;
  position: relative;
}

/* ðŸ«§ FLOATING BUBBLES (SAFE ANIMATION) */
.bubble-bg {
  position: absolute;
  bottom: -120px;
  background: rgba(255,255,255,0.35);
  border-radius: 50%;
  pointer-events: none;
  animation: floatUp linear infinite;
}

@keyframes floatUp {
  from {
    transform: translateY(0);
    opacity: 0.8;
  }
  to {
    transform: translateY(-150dvh);
    opacity: 0;
  }
}

/* âœ¨ LAYOUT */
.wrapper {
  position: relative;
  z-index: 2;
  max-width: 980px;
  margin: 40px auto;
  padding: 20px;
  display: grid;
  grid-template-columns: 2fr 1fr;
  gap: 28px;
}

/* ðŸ’– TODO */
.todo {
  background: var(--card);
  padding: 44px;
  border-radius: 36px;
  box-shadow: 0 40px 90px rgba(255,90,180,.45);
}

h1 {
  margin: 0;
  font-size: 44px;
  letter-spacing: 4px;
  text-transform: uppercase;
  background: linear-gradient(90deg, var(--teal), var(--pink), var(--purple));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

.spark {
  height: 6px;
  margin: 22px 0 30px;
  border-radius: 6px;
  background: linear-gradient(90deg, var(--teal), var(--pink), var(--purple));
}

ul { list-style: none; padding: 0; }

li {
  background: #fff;
  border-radius: 26px;
  padding: 18px 22px;
  margin-bottom: 14px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  box-shadow: 0 12px 30px rgba(150,120,255,.25);
}

.task {
  font-size: 22px;
  font-weight: 700;
  color: var(--text);
}

.meta {
  font-size: 12px;
  color: var(--pink);
}

li.done .task {
  text-decoration: line-through;
  color: var(--muted);
}

/* ðŸ’œ PANEL */
.panel {
  background: var(--panel);
  padding: 36px;
  border-radius: 36px;
  box-shadow: 0 30px 60px rgba(100,220,210,.35);
}

.panel h2 {
  margin-top: 0;
  background: linear-gradient(90deg, var(--teal), var(--purple));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

.panel input {
  width: 100%;
  height: 52px;
  margin-bottom: 14px;
  border-radius: 20px;
  border: none;
  padding: 0 5px;
  font-size: 15px;
  box-shadow: inset 0 0 0 2px #eadfff;
}

.panel button {
  width: 100%;
  height: 54px;
  border-radius: 22px;
  border: none;
  background: linear-gradient(135deg, var(--teal), var(--pink), var(--purple));
  color: white;
  font-weight: 800;
  font-size: 18px;
  cursor: pointer;
}

/* ðŸŽ® MINI GAME */
.game {
  position: fixed;
  right: 22px;
  bottom: env(safe-area-inset-bottom, 22px);
  width: 190px;
  height: 190px;
  border-radius: 30px;
  background: rgba(255,255,255,.3);
  backdrop-filter: blur(10px);
  box-shadow: 0 20px 40px rgba(255,90,180,.45);
  overflow: hidden;
  z-index: 5;
}

.game h3 {
  text-align: center;
  font-size: 14px;
  margin: 6px;
  color: white;
}

.score {
  text-align: center;
  font-size: 12px;
  color: white;
}

.pop {
  position: absolute;
  border-radius: 50%;
  background: radial-gradient(circle, #fff, #bff6f1);
  cursor: pointer;
  animation: grow 4s linear forwards;
}

@keyframes grow {
  from { transform: scale(.3); opacity: 1; }
  to { transform: scale(1.6); opacity: 0; }
}
</style>
</head>

<body>

<!-- ðŸ«§ FLOATING BUBBLES -->
<script>
for (let i = 0; i < 25; i++) {
  const b = document.createElement("div");
  b.className = "bubble-bg";
  b.style.left = Math.random() * 100 + "vw";
  b.style.width = b.style.height = 20 + Math.random() * 50 + "px";
  b.style.animationDuration = 10 + Math.random() * 12 + "s";
  document.body.appendChild(b);
}
</script>

<div class="wrapper">
  <div class="todo">
    <h1>To-do</h1>
    <div class="spark"></div>
    <ul id="list"></ul>
  </div>

  <div class="panel">
    <h2>New Dream</h2>
    <input id="task" placeholder="What sparkles today?" />
    <input id="date" type="date" />
    <input id="time" type="time" />
    <button onclick="addTask()">Add âœ¨</button>
  </div>
</div>

<!-- ðŸŽ® GAME -->
<div class="game" id="game">
  <h3>Pop Bubbles ðŸ«§</h3>
  <div class="score">
    Score: <span id="score">0</span><br>
    High: <span id="high">0</span>
  </div>
</div>

<audio id="popSound" src="https://assets.mixkit.co/sfx/preview/mixkit-bubble-pop-up-alert-notification-2357.mp3"></audio>

<script>
/* ðŸŽ® GAME */
let score = 0;
let high = localStorage.getItem("bibbleHigh") || 0;
document.getElementById("high").textContent = high;

setInterval(() => {
  const p = document.createElement("div");
  p.className = "pop";
  p.style.width = p.style.height = 20 + Math.random() * 35 + "px";
  p.style.left = Math.random() * 150 + "px";
  p.style.top = Math.random() * 150 + "px";

  p.onclick = () => {
    score++;
    document.getElementById("score").textContent = score;
    if (score > high) {
      high = score;
      localStorage.setItem("bibbleHigh", high);
      document.getElementById("high").textContent = high;
    }
    document.getElementById("popSound").play();
    p.remove();
  };

  document.getElementById("game").appendChild(p);
  setTimeout(() => p.remove(), 4000);
}, 900);

/* ðŸ“ TODO */
let tasks = JSON.parse(localStorage.getItem("bibbleTasks")) || [];
const list = document.getElementById("list");

function render() {
  list.innerHTML = "";
  tasks.forEach((t, i) => {
    const li = document.createElement("li");
    if (t.done) li.classList.add("done");
    li.innerHTML = `
      <div>
        <div class="task">${t.text}</div>
        <div class="meta">${t.date || ""} ${t.time || ""}</div>
      </div>
      <input type="checkbox" ${t.done ? "checked" : ""} onclick="toggle(${i})">
    `;
    list.appendChild(li);
  });
  localStorage.setItem("bibbleTasks", JSON.stringify(tasks));
}

function addTask() {
  if (!task.value.trim()) return;
  tasks.push({ text: task.value, date: date.value, time: time.value, done: false });
  task.value = date.value = time.value = "";
  render();
}

function toggle(i) {
  tasks[i].done = !tasks[i].done;
  render();
}

render();
</script>

</body>
</html>
